from geopy.geocoders import Nominatim
geolocator = Nominatim(user_agent="my-application123", timeout=3)
def get_coordinates_by_name(university_name):
    d = {}
    for i in university_name:
        location = geolocator.geocode(i)
        if location:
            d[i] = (location.latitude, location.longitude)
        else:
            d[i] = (None, None)
    return d
unique_universities = df['universityName'].unique()
locs = get_coordinates_by_name(unique_universities)

df_locs = pd.DataFrame.from_dict(locs, orient='index', columns=['Latitude', 'Longitude'])
df_locs.reset_index(inplace=True)
df_locs.rename(columns={'index': 'universityName'}, inplace=True)
df_locs.head(5)

df = pd.merge(df, df_locs, on='universityName', how='left')

import folium

# Drop rows with missing coordinates
df = df.dropna(subset=['Latitude', 'Longitude'])
# Create a Folium Map centered on a location 
m = folium.Map(location=[df['Latitude'].iloc[0], df['Longitude'].iloc[0]], zoom_start=4)

# Iterate through the df to add markers for each location
for index, row in df.iterrows():
    folium.CircleMarker(
        location=[row['Latitude'], row['Longitude']],
        radius=3, 
        color='blue',
        fill=True,
        fill_color='blue',
        fill_opacity=0.7,
        popup=f"{row['courseName'], row['fees_$']} - {row['city']}, {row['country']}"
    ).add_to(m)

# Display the map
m.save('map.html')
m
